<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import java.lang.String?>
<BorderPane fx:controller="fxml.app.mainController"
            stylesheets="@/css/styles.css"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1">

    <!-- Top Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 10;">
            <Label fx:id="usernameLabel" text="User: " style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Available Credits:" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
            <Label fx:id="creditsLabel" text="0" style="-fx-text-fill: #2ecc71; -fx-font-size: 16px; -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <center>
        <GridPane>
            <columnConstraints>
                <ColumnConstraints hgrow="ALWAYS" minWidth="10.0" />
            </columnConstraints>
            <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="ALWAYS" />
                <RowConstraints minHeight="10.0" vgrow="ALWAYS" />
            </rowConstraints>

            <!-- Row 1: Controls (NO LOAD BUTTON) -->
            <HBox alignment="CENTER_LEFT" spacing="8.0" GridPane.rowIndex="0">
                <padding><Insets bottom="5.0" left="10.0" right="10.0" top="5.0" /></padding>
                <Label text="Program/Function:" />
                <ComboBox fx:id="programSelectorComboBox" prefWidth="170.0" promptText="Select Context" />
                <Button fx:id="collapseButton" onAction="#handleCollapseClick" text="Collapse" />
                <Label fx:id="degreeLabel" minHeight="40.0" prefWidth="150.0" text="Current / Maximum degree" wrapText="true" />
                <Button fx:id="expandButton" onAction="#handleExpandClick" text="Expand" />
                <ComboBox fx:id="highlightComboBox" prefWidth="170.0" promptText="Highlight selection" />
            </HBox>

            <!-- Row 2: Instructions and Debugger -->
            <VBox spacing="5" style="-fx-background-color: #f0f0f0; -fx-padding: 10;">
                <Label text="Debugger\Execution" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                <Label text="Commands:" style="-fx-font-size: 11px; -fx-font-weight: bold;"/>
                <Label text="Start Execution" style="-fx-font-size: 10px;"/>
                <Label text="Start Regular, Start Debug" style="-fx-font-size: 9px;"/>
                <Label text="Stop, Resume" style="-fx-font-size: 9px;"/>
                <Label text="step forward, (Step backward)" style="-fx-font-size: 9px;"/>

                <Separator/>

                <Label text="Architecture Selection:" style="-fx-font-size: 11px; -fx-font-weight: bold;"/>
                <ComboBox fx:id="architectureComboBox" prefWidth="200">
                    <items>
                        <javafx.collections.FXCollections fx:factory="observableArrayList">
                            <String fx:value="Generation I"/>
                            <String fx:value="Generation II"/>
                            <String fx:value="Generation III"/>
                            <String fx:value="Generation IV"/>
                        </javafx.collections.FXCollections>
                    </items>
                </ComboBox>
                <Label fx:id="architectureCostLabel" text="Cost: 0 credits" style="-fx-font-size: 10px;"/>
                <Label fx:id="architectureValidationLabel" text="" wrapText="true"
                       style="-fx-font-size: 9px; -fx-text-fill: red;"/>

                <Separator/>

                <fx:include fx:id="debugger" source="../debugger/DebuggerPanel.fxml" />
            </VBox>

            <!-- Row 3: History and Back Button -->
            <SplitPane dividerPositions="0.75" prefHeight="160.0" prefWidth="200.0" GridPane.rowIndex="2">
                <fx:include fx:id="instructionHistory" source="../instruction_history/instruction_history.fxml" />

                <VBox alignment="CENTER" spacing="10">
                    <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                    <Button fx:id="backToDashboardButton" text="Back to Dashboard" onAction="#handleBackToDashboard"
                            maxWidth="Infinity" prefHeight="50"
                            style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 14px;"/>
                </VBox>
            </SplitPane>
        </GridPane>
    </center>
</BorderPane>